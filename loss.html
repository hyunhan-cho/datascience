<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì†ì‹¤í•¨ìˆ˜ & ìµœì í™” ì‹¤ì „ ê°€ì´ë“œ</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- KaTeX (ìˆ˜ì‹ ë Œë”ë§) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;700&display=swap');
        
        body { font-family: 'Pretendard', sans-serif; line-height: 1.6; }
        
        .math-block {
            overflow-x: auto;
            background-color: #f8fafc;
            padding: 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid #e2e8f0;
            margin: 1rem 0;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .example-box {
            background-color: #fffbeb; /* amber-50 */
            border-left: 4px solid #f59e0b; /* amber-500 */
            padding: 1rem 1.5rem;
            margin-top: 1rem;
            border-radius: 0 0.5rem 0.5rem 0;
        }

        .concept-card {
            background-color: white;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        /* ìŠ¬ë¼ì´ë” ì»¤ìŠ¤í…€ */
        input[type=range] { -webkit-appearance: none; background: transparent; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 16px; width: 16px;
            border-radius: 50%; background: #4f46e5; cursor: pointer; margin-top: -6px; 
            box-shadow: 0 0 2px rgba(0,0,0,0.2);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 4px; cursor: pointer; background: #cbd5e1; border-radius: 2px;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Navbar -->
    <nav class="fixed left-0 top-0 h-screen w-64 bg-white border-r border-slate-200 z-50 flex flex-col hidden md:flex">
        <div class="p-6 border-b border-slate-100 font-bold text-xl text-slate-800">
            ML Guidebook
        </div>
        <div class="flex-1 overflow-y-auto py-4 space-y-1">
            <button onclick="scrollToSection('regression')" class="w-full text-left px-6 py-3 hover:bg-slate-50 text-slate-600 font-medium">1. íšŒê·€ (MSE, Huber)</button>
            <button onclick="scrollToSection('classification')" class="w-full text-left px-6 py-3 hover:bg-slate-50 text-slate-600 font-medium">2. ë¶„ë¥˜ (BCE, CCE)</button>
            <button onclick="scrollToSection('special')" class="w-full text-left px-6 py-3 hover:bg-slate-50 text-slate-600 font-medium">3. íŠ¹ìˆ˜ (KL, Focal)</button>
            <button onclick="scrollToSection('optimization')" class="w-full text-left px-6 py-3 hover:bg-slate-50 text-slate-600 font-medium">4. ìµœì í™” (Momentum)</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="md:ml-64 p-6 md:p-12 max-w-5xl mx-auto">
        
        <!-- Header -->
        <header class="mb-16 text-center md:text-left">
            <h1 class="text-4xl font-bold text-slate-900 mb-4">ì†ì‹¤í•¨ìˆ˜ì™€ ìµœì í™”</h1>
            <p class="text-lg text-slate-600">
                ëª¨ë¸ì´ ì–¼ë§ˆë‚˜ í‹€ë ¸ëŠ”ì§€ ì¸¡ì •í•˜ëŠ” <strong>ì†ì‹¤í•¨ìˆ˜(Loss Function)</strong>ì™€, <br class="hidden md:inline">
                ê·¸ ì˜¤ì°¨ë¥¼ ì¤„ì—¬ë‚˜ê°€ëŠ” <strong>ìµœì í™”(Optimizer)</strong>ì˜ í•µì‹¬ ì›ë¦¬ë¥¼ ì˜ˆì œì™€ í•¨ê»˜ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.
            </p>
        </header>

        <!-- 1. Regression -->
        <section id="regression" class="mb-20">
            <h2 class="text-2xl font-bold text-slate-800 mb-6 border-b pb-2 border-slate-200">
                1. íšŒê·€ ë¬¸ì œ (ì—°ì†ëœ ê°’ ì˜ˆì¸¡)
            </h2>

            <!-- MSE -->
            <div class="concept-card">
                <div class="flex justify-between items-baseline mb-4">
                    <h3 class="text-xl font-bold text-indigo-700">Mean Squared Error (MSE)</h3>
                    <span class="text-xs font-bold bg-slate-100 px-2 py-1 rounded text-slate-500">ê¸°ë³¸</span>
                </div>
                <p class="mb-4">ê°€ì¥ ë³´í¸ì ì¸ íšŒê·€ ì†ì‹¤í•¨ìˆ˜ì…ë‹ˆë‹¤. ì˜¤ì°¨ë¥¼ ì œê³±í•˜ì—¬ í‰ê· ì„ ëƒ…ë‹ˆë‹¤. ì œê³±ì„ í•˜ê¸° ë•Œë¬¸ì— <strong>í° ì˜¤ì°¨ì— ëŒ€í•´ ë§¤ìš° í° í˜ë„í‹°</strong>ë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤.</p>
                
                <div class="math-block">
                    $$ \text{MSE} = \frac{1}{n} \sum_{i=1}^{n} (y_i - \hat{y}_i)^2 $$
                </div>

                <div class="example-box">
                    <h4 class="font-bold text-amber-800 mb-2">ğŸ“ ì˜ˆì œ: ì•„íŒŒíŠ¸ ê°€ê²© ì˜ˆì¸¡</h4>
                    <ul class="text-sm space-y-2 text-slate-700">
                        <li><strong>ìƒí™©:</strong> ì‹¤ì œ ê°€ê²©ì´ <strong>10ì–µ</strong>ì¸ ì•„íŒŒíŠ¸</li>
                        <li><strong>ëª¨ë¸ A:</strong> 11ì–µ ì˜ˆì¸¡ (ì˜¤ì°¨ 1ì–µ) â†’ $1^2 = \mathbf{1}$</li>
                        <li><strong>ëª¨ë¸ B:</strong> 13ì–µ ì˜ˆì¸¡ (ì˜¤ì°¨ 3ì–µ) â†’ $3^2 = \mathbf{9}$</li>
                        <li>ğŸ‘‰ ì˜¤ì°¨ëŠ” 3ë°° ì°¨ì´ì§€ë§Œ, ì†ì‹¤ê°’(íŒ¨ë„í‹°)ì€ <strong>9ë°°</strong>ê°€ ë©ë‹ˆë‹¤. ë§ì´ í‹€ë¦´ìˆ˜ë¡ ê°€í˜¹í•˜ê²Œ ì²˜ë²Œí•©ë‹ˆë‹¤.</li>
                    </ul>
                </div>
            </div>

            <!-- Huber -->
            <div class="concept-card">
                <div class="flex justify-between items-baseline mb-4">
                    <h3 class="text-xl font-bold text-green-700">Huber Loss</h3>
                    <span class="text-xs font-bold bg-green-50 px-2 py-1 rounded text-green-600">ì´ìƒì¹˜ì— ê°•í•¨</span>
                </div>
                <p class="mb-4">MSEëŠ” ì´ìƒì¹˜ í•˜ë‚˜ ë•Œë¬¸ì— ì „ì²´ ëª¨ë¸ì´ ë§ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Huber LossëŠ” ì˜¤ì°¨ê°€ ì‘ì„ ë• MSEì²˜ëŸ¼, í´ ë• MAE(ì ˆëŒ€ê°’)ì²˜ëŸ¼ ë™ì‘í•˜ì—¬ ì´ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.</p>
                
                <div class="math-block text-sm">
                    $$ L_\delta = \begin{cases} \frac{1}{2}(y - \hat{y})^2 & \text{if } |y - \hat{y}| \le \delta \\ \delta (|y - \hat{y}| - \frac{1}{2}\delta) & \text{otherwise} \end{cases} $$
                </div>

                <div class="example-box">
                    <h4 class="font-bold text-amber-800 mb-2">ğŸ“ ì˜ˆì œ: ë°ì´í„° ì…ë ¥ ì˜¤ë¥˜ê°€ ìˆë‹¤ë©´?</h4>
                    <p class="text-sm text-slate-700 mb-2">ëŒ€ë¶€ë¶„ì˜ ì§‘ê°’ì´ 10ì–µì¸ë°, ì‹¤ìˆ˜ë¡œ <strong>1000ì–µ</strong>ì´ë¼ëŠ” ë°ì´í„°ê°€ í•˜ë‚˜ ë“¤ì–´ì™”ë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤.</p>
                    <ul class="text-sm space-y-2 text-slate-700">
                        <li><strong>MSE ì‚¬ìš© ì‹œ:</strong> ì˜¤ì°¨ ì œê³±ì´ ì²œë¬¸í•™ì ì¸ ìˆ«ìê°€ ë˜ì–´ ëª¨ë¸ì´ ì´ ë°ì´í„° í•˜ë‚˜ë¥¼ ë§ì¶”ë ¤ê³  ì „ì²´ ì¶”ì„¸ë¥¼ ë§ê°€ëœ¨ë¦½ë‹ˆë‹¤.</li>
                        <li><strong>Huber ì‚¬ìš© ì‹œ:</strong> ì¼ì • ê¸°ì¤€($\delta$)ì„ ë„˜ìœ¼ë©´ ì œê³±í•˜ì§€ ì•Šê³  ì ˆëŒ€ê°’ìœ¼ë¡œ ê³„ì‚°í•˜ë¯€ë¡œ, ì´ìƒì¹˜ì˜ ì˜í–¥ì„ ì œí•œí•©ë‹ˆë‹¤.</li>
                    </ul>
                </div>
                
                <!-- Visualization -->
                <div class="mt-8">
                    <h4 class="font-bold text-sm text-slate-500 mb-2">ğŸ“Š [ì‹œë®¬ë ˆì´ì…˜] ì˜¤ì°¨ í¬ê¸°ì— ë”°ë¥¸ ì†ì‹¤ ë¹„êµ</h4>
                    <div class="h-[250px] w-full">
                        <canvas id="chart-huber"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. Classification -->
        <section id="classification" class="mb-20">
            <h2 class="text-2xl font-bold text-slate-800 mb-6 border-b pb-2 border-slate-200">
                2. ë¶„ë¥˜ ë¬¸ì œ (ì¹´í…Œê³ ë¦¬ ì˜ˆì¸¡)
            </h2>

            <!-- BCE -->
            <div class="concept-card">
                <h3 class="text-xl font-bold text-indigo-700 mb-2">Binary Cross-Entropy (BCE)</h3>
                <p class="mb-4">ì´ì§„ ë¶„ë¥˜(ì˜ˆ/ì•„ë‹ˆì˜¤)ì—ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì •ë‹µì— í•´ë‹¹í•˜ëŠ” í™•ë¥ ì— ë¡œê·¸ë¥¼ ì·¨í•´ ê³„ì‚°í•©ë‹ˆë‹¤.</p>
                
                <div class="math-block">
                    $$ \text{Loss} = - [y \log(\hat{y}) + (1-y)\log(1-\hat{y})] $$
                </div>

                <div class="example-box">
                    <h4 class="font-bold text-amber-800 mb-2">ğŸ“ ì˜ˆì œ: ìŠ¤íŒ¸ ë©”ì¼ ë¶„ë¥˜ (ìŠ¤íŒ¸=1)</h4>
                    <div class="grid md:grid-cols-2 gap-4 text-sm text-slate-700">
                        <div class="bg-white p-3 rounded border">
                            <strong>âœ… ì˜ ë§ì¶˜ ê²½ìš°</strong><br>
                            ì˜ˆì¸¡ í™•ë¥ : 0.9 (90% í™•ì‹ )<br>
                            Loss: $-\log(0.9) \approx \mathbf{0.10}$<br>
                            <span class="text-xs text-green-600">â†’ ì†ì‹¤ì´ ì‘ìŒ</span>
                        </div>
                        <div class="bg-white p-3 rounded border">
                            <strong>âŒ í‹€ë¦° ê²½ìš°</strong><br>
                            ì˜ˆì¸¡ í™•ë¥ : 0.1 (10% í™•ì‹ )<br>
                            Loss: $-\log(0.1) \approx \mathbf{2.30}$<br>
                            <span class="text-xs text-red-600">â†’ ì†ì‹¤ì´ 23ë°° í¼ (í˜ë„í‹°)</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CCE -->
            <div class="concept-card">
                <h3 class="text-xl font-bold text-indigo-700 mb-2">Categorical Cross-Entropy</h3>
                <p class="mb-4">ì—¬ëŸ¬ ê°œì˜ í´ë˜ìŠ¤ ì¤‘ í•˜ë‚˜ë¥¼ ë§ì¶œ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. (ì˜ˆ: ê°œ, ê³ ì–‘ì´, ì•µë¬´ìƒˆ)</p>
                <div class="math-block">
                    $$ \text{CCE} = -\sum_{j=1}^{m} y_{j} \log(\hat{y}_{j}) $$
                </div>
                <div class="example-box">
                    <h4 class="font-bold text-amber-800 mb-2">ğŸ“ ì˜ˆì œ: ë™ë¬¼ ë¶„ë¥˜ (ì •ë‹µ: ê³ ì–‘ì´[0, 1, 0])</h4>
                    <p class="text-sm text-slate-700 mb-1">ëª¨ë¸ ì˜ˆì¸¡: [ê°œ 0.1, <strong>ê³ ì–‘ì´ 0.7</strong>, ì•µë¬´ìƒˆ 0.2]</p>
                    <p class="text-sm text-slate-700">
                        ê³„ì‚°: $-(0\times\log0.1 + \mathbf{1\times\log0.7} + 0\times\log0.2)$<br>
                        ê²°ê³¼: $-\log(0.7) \approx \mathbf{0.36}$
                    </p>
                    <p class="text-xs text-slate-500 mt-1">*ì •ë‹µì¸ í´ë˜ìŠ¤ì˜ í™•ë¥ ë§Œ ê³„ì‚°ì— í¬í•¨ë©ë‹ˆë‹¤.</p>
                </div>
            </div>
        </section>

        <!-- 3. Special -->
        <section id="special" class="mb-20">
            <h2 class="text-2xl font-bold text-slate-800 mb-6 border-b pb-2 border-slate-200">
                3. íŠ¹ìˆ˜ ëª©ì  ì†ì‹¤í•¨ìˆ˜ (ì‹¬í™”)
            </h2>

            <!-- KL Divergence -->
            <div class="concept-card">
                <h3 class="text-xl font-bold text-purple-700 mb-2">KL Divergence</h3>
                <p class="mb-4">ë‘ í™•ë¥  ë¶„í¬ê°€ ì–¼ë§ˆë‚˜ ë‹¤ë¥¸ì§€ ì¸¡ì •í•©ë‹ˆë‹¤. ëª¨ë¸ì´ ìƒì„±í•œ ë¶„í¬(Q)ë¥¼ ì‹¤ì œ ë¶„í¬(P)ì™€ ê°™ê²Œ ë§Œë“¤ ë•Œ ì”ë‹ˆë‹¤.</p>
                <div class="math-block">
                    $$ D_{KL}(P || Q) = \sum P(x) \log \left( \frac{P(x)}{Q(x)} \right) $$
                </div>

                <div class="bg-slate-50 p-6 rounded-lg mt-4 border border-slate-200">
                    <h4 class="font-bold text-sm text-slate-700 mb-4">ğŸ›ï¸ ì‹¤ìŠµ: ë™ì „ ë˜ì§€ê¸° ë¶„í¬ ë§ì¶”ê¸°</h4>
                    <p class="text-sm text-slate-600 mb-4">
                        ì‹¤ì œ ë™ì „(Target)ì€ ì•ë©´ì´ 80% ë‚˜ì˜µë‹ˆë‹¤. ëª¨ë¸ì´ ì´ë¥¼ ë”°ë¼í•˜ë„ë¡ ì¡°ì •í•´ë³´ì„¸ìš”.
                    </p>
                    
                    <div class="flex items-center gap-6">
                        <div class="w-1/3 text-right text-sm font-bold text-slate-500">
                            Target (P)<br>
                            <span class="text-xs font-normal">ì• 0.8 / ë’¤ 0.2</span>
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between text-xs font-bold mb-1">
                                <span>Model (Q) ì˜ˆì¸¡ê°’</span>
                                <span id="q-text" class="text-purple-600">0.50</span>
                            </div>
                            <input type="range" id="kl-slider" min="0.01" max="0.99" step="0.01" value="0.50" class="w-full">
                        </div>
                        <div class="w-1/3">
                            <div class="text-xs text-slate-400">KL Divergence</div>
                            <div id="kl-result" class="font-mono font-bold text-2xl text-slate-800">0.00</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Focal Loss -->
            <div class="concept-card">
                <h3 class="text-xl font-bold text-purple-700 mb-2">Focal Loss</h3>
                <p class="mb-4">ë°ì´í„° ë¶ˆê· í˜• ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤. <strong>"ì´ë¯¸ ì˜ ë§ì¶”ëŠ” ì‰¬ìš´ ë¬¸ì œëŠ” ë¬´ì‹œí•˜ê³ , ì–´ë ¤ìš´ ë¬¸ì œì— ì§‘ì¤‘í•˜ì"</strong>ëŠ” ì•„ì´ë””ì–´ì…ë‹ˆë‹¤.</p>
                <div class="math-block">
                    $$ \text{FL} = -(1 - p_t)^\gamma \log(p_t) $$
                </div>
                
                <div class="example-box">
                    <h4 class="font-bold text-amber-800 mb-2">ğŸ“ ì˜ˆì œ: ë°°ê²½ vs ê°ì²´ (Gamma $\gamma=2$)</h4>
                    <ul class="text-sm space-y-2 text-slate-700">
                        <li><strong>ì‰¬ìš´ ì˜ˆì œ (ë°°ê²½):</strong> í™•ë¥  0.9ë¡œ ì˜ ë§ì¶¤ <br>â†’ $(1-0.9)^2 = 0.01$ (ê°€ì¤‘ì¹˜ê°€ 1/100ë¡œ ì¤Œ)</li>
                        <li><strong>ì–´ë ¤ìš´ ì˜ˆì œ (ì‘ì€ ë¬¼ì²´):</strong> í™•ë¥  0.1ë¡œ ì˜ ëª» ë§ì¶¤ <br>â†’ $(1-0.1)^2 = 0.81$ (ê°€ì¤‘ì¹˜ê°€ ê±°ì˜ ê·¸ëŒ€ë¡œ ìœ ì§€)</li>
                        <li>ğŸ‘‰ ê²°ê³¼ì ìœ¼ë¡œ ëª¨ë¸ì€ ì–´ë ¤ìš´ ì˜ˆì œë¥¼ í•™ìŠµí•˜ëŠ” ë° ì—ë„ˆì§€ë¥¼ 80ë°° ë” ì”ë‹ˆë‹¤.</li>
                    </ul>
                </div>

                <div class="mt-6 pt-6 border-t border-slate-100">
                    <h4 class="font-bold text-sm text-slate-500 mb-2">ğŸ“Š [ì‹œë®¬ë ˆì´ì…˜] Gamma ê°’ì— ë”°ë¥¸ ê°€ì¤‘ì¹˜ ë³€í™”</h4>
                    <div class="flex items-center gap-2 mb-2">
                        <label class="text-xs font-bold text-slate-500">Gamma ì¡°ì ˆ:</label>
                        <input type="range" id="gamma-slider" min="0" max="5" step="0.5" value="2.0" class="w-32">
                        <span id="gamma-val" class="text-purple-600 text-sm font-bold">2.0</span>
                    </div>
                    <div class="h-[200px] w-full bg-white rounded">
                        <canvas id="chart-focal"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. Optimization -->
        <section id="optimization" class="mb-20">
            <h2 class="text-2xl font-bold text-slate-800 mb-6 border-b pb-2 border-slate-200">
                4. ìµœì í™” ì•Œê³ ë¦¬ì¦˜ (í•™ìŠµ ì†ë„ ë†’ì´ê¸°)
            </h2>

            <!-- Optimizer Cards -->
            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <div class="concept-card !p-6 !mb-0">
                    <h4 class="font-bold text-pink-600 mb-2">Gradient Descent (SGD)</h4>
                    <p class="text-sm text-slate-600">ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ë²•. ì‚° ë¹„íƒˆê¸¸ì„ ë”°ë¼ í•œ ë°œìêµ­ì”© ë‚´ë ¤ê°‘ë‹ˆë‹¤.</p>
                    <div class="math-block text-sm py-2 my-2 bg-slate-50">
                        $$ \theta_{new} = \theta - \eta \cdot \text{Gradient} $$
                    </div>
                </div>
                <div class="concept-card !p-6 !mb-0">
                    <h4 class="font-bold text-pink-600 mb-2">Momentum</h4>
                    <p class="text-sm text-slate-600">ë‚´ë ¤ê°€ë˜ ì†ë„(ê´€ì„±)ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. ë°©í–¥ì´ ìì£¼ ë°”ë€Œì–´ë„ ë¶€ë“œëŸ½ê²Œ ê°€ì†í•˜ì—¬ ë¹ ë¥´ê²Œ ìˆ˜ë ´í•©ë‹ˆë‹¤.</p>
                    <div class="math-block text-sm py-2 my-2 bg-slate-50">
                        $$ v \leftarrow \alpha v - \eta \nabla J $$
                    </div>
                </div>
            </div>

            <!-- Simulation -->
            <div class="bg-slate-900 text-white p-6 rounded-xl shadow-lg">
                <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                    <div>
                        <h3 class="text-xl font-bold text-white">ğŸ® ìµœì í™” ì‹œë®¬ë ˆì´ì…˜</h3>
                        <p class="text-slate-400 text-sm">Momentumì„ ì¼œë©´ ê³µì´ ê³¨ì§œê¸°ë¥¼ ì–´ë–»ê²Œ ë„˜ì–´ê°€ëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”.</p>
                    </div>
                    <div class="flex items-center gap-4 bg-slate-800 p-2 rounded-lg border border-slate-700">
                        <div>
                            <label class="text-xs text-slate-400 block">í•™ìŠµë¥  (LR)</label>
                            <input type="range" id="sim-lr" min="0.01" max="0.3" step="0.01" value="0.1" class="w-24">
                        </div>
                        <div class="flex items-center gap-2">
                            <input type="checkbox" id="sim-momentum" class="w-4 h-4 rounded text-pink-600 focus:ring-pink-500">
                            <label for="sim-momentum" class="text-sm font-bold text-pink-400 select-none cursor-pointer">Momentum ì¼œê¸°</label>
                        </div>
                        <button onclick="resetSim()" class="text-xs bg-slate-700 hover:bg-slate-600 px-3 py-1 rounded">ì´ˆê¸°í™”</button>
                        <button onclick="stepSim()" class="text-xs bg-pink-600 hover:bg-pink-500 px-3 py-1 rounded font-bold shadow">ì‹¤í–‰ (Step)</button>
                    </div>
                </div>
                
                <div class="h-[300px] w-full bg-slate-800 rounded-lg relative overflow-hidden border border-slate-700">
                    <canvas id="chart-opt"></canvas>
                </div>
                
                <div class="flex justify-center gap-8 mt-4 font-mono text-sm">
                    <span class="text-slate-400">ìœ„ì¹˜: <b id="sim-pos" class="text-pink-400">0.00</b></span>
                    <span class="text-slate-400">ì†ë„: <b id="sim-vel" class="text-blue-400">0.00</b></span>
                </div>
            </div>
        </section>

        <footer class="text-center text-slate-400 text-sm py-12 border-t border-slate-200">
            <p>ML Practice Guide</p>
        </footer>
    </main>

    <script>
        // Navigation Scroll
        function scrollToSection(id) { document.getElementById(id).scrollIntoView({ behavior: 'smooth' }); }

        // --- 1. Huber Chart ---
        const ctxHuber = document.getElementById('chart-huber').getContext('2d');
        const errs = [], mse = [], huber = [], delta = 1.5;
        for(let e=-4; e<=4; e+=0.1) {
            errs.push(e); 
            mse.push(e*e);
            huber.push(Math.abs(e)<=delta ? 0.5*e*e : delta*(Math.abs(e)-0.5*delta));
        }
        new Chart(ctxHuber, {
            type: 'line',
            data: {
                labels: errs.map(v=>v.toFixed(1)),
                datasets: [
                    {label:'MSE (ì œê³±)', data:mse, borderColor:'#ef4444', borderWidth:2, pointRadius:0},
                    {label:'Huber (ì•ˆì •ì )', data:huber, borderColor:'#22c55e', borderWidth:4, pointRadius:0}
                ]
            },
            options: { responsive:true, maintainAspectRatio:false, scales:{x:{display:false}, y:{display:false}}, plugins:{legend:{position:'top'}} }
        });

        // --- 2. Focal Chart ---
        let focalChart;
        const gSlider = document.getElementById('gamma-slider');
        const gVal = document.getElementById('gamma-val');
        function getFocalData(g) {
            const d = [];
            for(let p=0.01; p<=1; p+=0.02) d.push(-Math.pow(1-p, g)*Math.log(p));
            return d;
        }
        focalChart = new Chart(document.getElementById('chart-focal'), {
            type: 'line',
            data: {
                labels: Array.from({length:50}, (_,i)=>(i*0.02+0.01).toFixed(2)),
                datasets: [{label:'Loss Value', data:getFocalData(2), borderColor:'#7c3aed', borderWidth:3, fill:true, backgroundColor:'rgba(124,58,237,0.1)', pointRadius:0}]
            },
            options: { responsive:true, maintainAspectRatio:false, scales:{x:{title:{display:true, text:'ì˜ˆì¸¡ í™•ë¥  (p)'}}, y:{max:5}}, plugins:{legend:{display:false}} }
        });
        gSlider.oninput = function() {
            gVal.innerText = this.value;
            focalChart.data.datasets[0].data = getFocalData(this.value);
            focalChart.update();
        };

        // --- 3. KL Logic ---
        const klSlider = document.getElementById('kl-slider');
        const qText = document.getElementById('q-text');
        const klRes = document.getElementById('kl-result');
        klSlider.oninput = function() {
            const q = parseFloat(this.value);
            qText.innerText = q.toFixed(2);
            const p1=0.8, p2=0.2, q1=q, q2=1-q;
            // prevent log(0)
            const safeQ1 = Math.max(q1, 0.0001); 
            const safeQ2 = Math.max(q2, 0.0001);
            const kl = p1*Math.log(p1/safeQ1) + p2*Math.log(p2/safeQ2);
            klRes.innerText = kl.toFixed(4);
        };

        // --- 4. Sim Logic ---
        let sX = -3.5, sV = 0, sChart;
        const sLr = document.getElementById('sim-lr');
        const sMom = document.getElementById('sim-momentum');
        const sPos = document.getElementById('sim-pos');
        const sVel = document.getElementById('sim-vel');
        
        function f(x) { return x*x; }
        function df(x) { return 2*x; }

        sChart = new Chart(document.getElementById('chart-opt'), {
            type: 'line',
            data: {
                datasets: [
                    {label:'Surface', data:Array.from({length:81}, (_,i)=>({x:(i-40)/10, y:f((i-40)/10)})), borderColor:'#475569', pointRadius:0, borderWidth:2},
                    {label:'Agent', data:[{x:sX, y:f(sX)}], backgroundColor:'#db2777', pointRadius:10, type:'scatter'}
                ]
            },
            options: { 
                responsive:true, maintainAspectRatio:false, animation:{duration:200},
                scales:{ x:{type:'linear', min:-4, max:4, grid:{color:'#334155'}}, y:{min:0, max:16, grid:{color:'#334155'}} },
                plugins:{legend:{display:false}}
            }
        });

        window.stepSim = function() {
            const lr = parseFloat(sLr.value);
            const grad = df(sX);
            if(sMom.checked) {
                sV = 0.9 * sV - lr * grad;
                sX += sV;
            } else {
                sV = 0;
                sX -= lr * grad;
            }
            // Boundary check for visual
            if(sX > 4) sX = 4; if(sX < -4) sX = -4;

            sChart.data.datasets[1].data = [{x:sX, y:f(sX)}];
            sChart.update();
            sPos.innerText = sX.toFixed(2);
            sVel.innerText = sV.toFixed(2);
        };
        window.resetSim = function() { sX=-3.5; sV=0; sChart.data.datasets[1].data=[{x:sX, y:f(sX)}]; sChart.update(); sPos.innerText="-3.50"; sVel.innerText="0.00"; };

        // Render Math on Load
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false}
                ]
            });
            // Initial KL Calc
            klSlider.dispatchEvent(new Event('input'));
        });
    </script>
</body>
</html>